#!/usr/bin/env node

console.log('=== SMTP Configuration Check ===\n')

console.log('The "email rate limit exceeded" error with code 429 indicates that:')
console.log('1. Your custom SMTP is NOT being used')
console.log('2. You are still on the default Supabase SMTP which has a 2 emails/hour limit')
console.log('')
console.log('To fix this:')
console.log('1. Go to: https://supabase.com/dashboard/project/ducrwfvylwdaqpwfbdub/settings/auth')
console.log('2. Scroll down to "SMTP Settings"')
console.log('3. Make sure "Enable custom SMTP" toggle is ON (not just configured)')
console.log('4. Verify your Resend credentials:')
console.log('   - Host: smtp.resend.com')
console.log('   - Port: 587')
console.log('   - Username: resend')
console.log('   - Password: [Your Resend API Key starting with re_]')
console.log('   - Sender email: noreply@yourdomain.com')
console.log('   - Sender name: Your App Name')
console.log('5. Click "Save" even if it looks saved')
console.log('6. IMPORTANT: After saving, refresh the page and verify the toggle is still ON')
console.log('')
console.log('Common issues:')
console.log('- The toggle might be OFF even though credentials are entered')
console.log('- Invalid API key format (should start with re_)')
console.log('- Sender email domain not verified in Resend')
console.log('- Configuration not saved properly (try saving twice)')
console.log('')
console.log('Once properly configured with custom SMTP:')
console.log('- The 2 emails/hour limit will NOT apply')
console.log('- You will have a 30 new users/hour limit instead')
console.log('- Password reset emails have separate limits')
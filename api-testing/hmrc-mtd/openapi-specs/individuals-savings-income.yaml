openapi: 3.0.3
info:
  title: Individuals Savings Income (MTD)
  description: "# Send fraud prevention data\nHMRC monitors transactions to help protect\
    \ your customers' confidential data from criminals and fraudsters. \n\n<div class=\"\
    govuk-warning-text warning-icon-fix\">\n  <span class=\"govuk-warning-text__icon\
    \ warning-icon-ui-fix\" aria-hidden=\"true\">!</span>\n  <strong class=\"govuk-warning-text__text\"\
    >\n    <span class=\"govuk-warning-text__assistive\">Warning</span>\n    You are\
    \ required by law to submit header data for this API. This includes all associated\
    \ APIs and endpoints.\n  </strong>\n</div>\n\n[Check the data you need to send](/guides/fraud-prevention/).\
    \ You can also use the [Test API](/api-documentation/docs/api/service/txm-fph-validator-api/1.0)\
    \ during initial development and as part of your quality assurance checks.\n\n\
    # Mapping APIs to Self Assessment tax return forms\nSome parameters in this API\
    \ map to box numbers in one or more Self Assessment tax return forms. To learn\
    \ more and to download this mapping information as a CSV file, go to [income-tax-mtd-changelog/mapping](https://github.com/hmrc/income-tax-mtd-changelog?tab=readme-ov-file#mapping-apis-to-self-assessment-tax-return-forms)\
    \ on GitHub.\n\n# Changelog\nYou can find the changelog in the [income-tax-mtd-changelog](https://github.com/hmrc/income-tax-mtd-changelog/#readme)\
    \ on GitHub.\n\n# Support\n\n* Direct reports of bugs or errors in Production\
    \ or Sandbox code, \nor queries about HMRC business functionality (such as how\
    \ a specific field is used by HMRC or why it is needed) to the [Software Development\
    \ Support Team (SDST)](https://developer.service.hmrc.gov.uk/developer/support).\n\
    * Send queries or feedback related to the design of the APIs (including recommended\
    \ changes) using\nthe [income-tax-mtd-changelog](https://github.com/hmrc/income-tax-mtd-changelog/issues)\
    \ GitHub page.\n* <a href=\"/contact/report-technical-problem?newTab=true&service=api-documentation-frontend\"\
    \ target=\"_blank\">Is this page not working properly? (opens in new tab)</a>\n"
  version: "2.0"
servers:
- url: https://test-api.service.hmrc.gov.uk
  description: Sandbox
- url: https://api.service.hmrc.gov.uk
  description: Production
tags:
- name: UK Savings Account
  description: Resources relating to an individual’s UK savings account
- name: Savings Income
  description: Resources relating to an individual's savings income
paths:
  /individuals/savings-income/uk-accounts/{nino}:
    get:
      summary: List All UK Savings Accounts
      parameters:
      - name: savingsAccountId
        in: query
        description: The unique identifier of a savings account.
        required: false
        schema:
          pattern: "^[A-Za-z0-9]{15}$"
          type: string
          example: SAVKB2UVwUTBQGJ
      security:
      - User-Restricted:
        - read:self-assessment
    post:
      summary: Add a UK Savings Account
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/savings-income/uk-accounts/{nino}/account-name/{savingsAccountId}:
    put:
      tags:
      - UK Savings Account
      summary: "Update a UK Savings Account name [test only]"
      description: |
        This endpoint allows a developer to update UK savings account information.
        A National Insurance number and savings account ID must be provided.

        ### Test data
        Scenario simulation using Gov-Test-Scenario headers is only available in the sandbox environment.

        | Header Value (Gov-Test-Scenario) | Scenario                                       |
        |----------------------------------|------------------------------------------------|
        | N/A - DEFAULT                    | Simulates success response.                    |
        | NOT_FOUND                        | Simulates the scenario where no data is found. |
        | REQUEST_CANNOT_BE_FULFILLED      | Simulates the scenario where the request cannot be fulfilled for various reasons other than the ones triggering other errors.|
        | STATEFUL                         | Performs a stateful update.                    |
      parameters:
      - name: nino
        in: path
        description: |
          National Insurance number, in the format `AA999999A`
        required: true
        schema:
          type: string
          example: TC663795B
      - name: savingsAccountId
        in: query
        description: The unique identifier of a savings account.
        required: false
        schema:
          pattern: "^[A-Za-z0-9]{15}$"
          type: string
          example: SAVKB2UVwUTBQGJ
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.2.0+json
      - name: Content-Type
        in: header
        description: |
          Specifies the format of the request body, which must be JSON.
        required: true
        schema:
          type: string
          enum:
          - application/json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      - name: Gov-Test-Scenario
        in: header
        description: |
          Only in sandbox environment. See Test Data table for all header values.
        required: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              title: Update a UK Savings Account name Request
              required:
              - accountName
              type: object
              properties:
                accountName:
                  pattern: "^[A-Za-z0-9 &'\\(\\)\\*,\\-\\./@£]{1,32}$"
                  type: string
                  description: Friendly account name.
                  example: Shares savings account
              description: Update a UK Savings Account name Request
            examples:
              example-1:
                description: Request Example
                value:
                  $ref: ./examples/ukSavingsAccount/name_update_request.json
      responses:
        "204":
          description: Success (No Content)
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
            Deprecation:
              description: |
                The deprecation date/time for this endpoint.
              required: false
              schema:
                type: string
                example: "Sun, 01 Jan 2023 23:59:59 GMT"
            Sunset:
              description: |
                The earliest date/time this endpoint will become unavailable after deprecation.
              required: false
              schema:
                type: string
                example: "Sun, 02 Jul 2023 23:59:59 GMT"
            Link:
              description: |
                URL of the documentation for the API.
              required: false
              schema:
                type: string
                example: https://developer.service.hmrc.gov.uk/api-documentation/docs/api/service/individuals-savings-income-api
        "400":
          description: Bad request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_NINO:
                  description: The format of the supplied NINO field is not valid.
                  value:
                    code: FORMAT_NINO
                    message: The provided NINO is invalid
                FORMAT_SAVINGS_ACCOUNT_ID:
                  description: The format of the supplied savings account ID is not
                    valid
                  value:
                    code: FORMAT_SAVINGS_ACCOUNT_ID
                    message: The format of the supplied savings account ID is not
                      valid
                FORMAT_ACCOUNT_NAME:
                  description: The format of the supplied account name field is not
                    valid.
                  value:
                    code: FORMAT_ACCOUNT_NAME
                    message: The provided account name is invalid
                RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED:
                  description: An empty or non-matching body was submitted.
                  value:
                    code: RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED
                    message: An empty or non-matching body was submitted
                RULE_INCORRECT_GOV_TEST_SCENARIO:
                  description: The request did not match any available Sandbox data.
                    Check that the supplied Gov-Test-Scenario is correct for this
                    endpoint version. This error will only be returned in the Sandbox
                    environment.
                  value:
                    code: RULE_INCORRECT_GOV_TEST_SCENARIO
                    message: The supplied Gov-Test-Scenario is not valid
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client or agent is not authorised. This is because:\
                    \ the client is not subscribed to MTD, \nthe agent is not subscribed\
                    \ to Agent Services, or the client has not authorised the agent\
                    \ to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
        "404":
          description: Not Found
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                MATCHING_RESOURCE_NOT_FOUND:
                  description: The supplied income source could not be found.
                  value:
                    code: MATCHING_RESOURCE_NOT_FOUND
                    message: Matching resource not found
        "422":
          description: Unprocessable Entity
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                RULE_REQUEST_CANNOT_BE_FULFILLED:
                  description: The request cannot be fulfilled. More specific information
                    is provided in the error message.
                  value:
                    code: RULE_REQUEST_CANNOT_BE_FULFILLED
                    message: Custom (will vary in production depending on the actual
                      error)
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/savings-income/uk-accounts/{nino}/{taxYear}/{savingsAccountId}:
    get:
      summary: Retrieve UK Savings Account Annual Summary
      security:
      - User-Restricted:
        - read:self-assessment
    put:
      summary: Create and Amend a UK Savings Account Annual Summary
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/savings-income/other/{nino}/{taxYear}:
    get:
      summary: Retrieve Savings Income
      security:
      - User-Restricted:
        - read:self-assessment
    put:
      summary: Create and Amend Savings Income
      security:
      - User-Restricted:
        - write:self-assessment
    delete:
      summary: Delete Savings Income
      security:
      - User-Restricted:
        - write:self-assessment
components:
  schemas:
    name_update_request:
      title: Update a UK Savings Account name Request
      required:
      - accountName
      type: object
      properties:
        accountName:
          pattern: "^[A-Za-z0-9 &'\\(\\)\\*,\\-\\./@£]{1,32}$"
          type: string
          description: Friendly account name.
          example: Shares savings account
      description: Update a UK Savings Account name Request
    error_response:
      required:
      - code
      type: object
      properties:
        code:
          type: string
          description: The error code
        message:
          type: string
          description: The error message
      description: Error Response
  parameters:
    savingsAccountId:
      name: savingsAccountId
      in: query
      description: The unique identifier of a savings account.
      required: false
      schema:
        pattern: "^[A-Za-z0-9]{15}$"
        type: string
        example: SAVKB2UVwUTBQGJ
    nino:
      name: nino
      in: path
      description: |
        National Insurance number, in the format `AA999999A`
      required: true
      schema:
        type: string
        example: TC663795B
    acceptHeader:
      name: Accept
      in: header
      description: |
        Specifies the response format and the version of the API to be used.
      required: true
      schema:
        type: string
        enum:
        - application/vnd.hmrc.2.0+json
    contentTypeJson:
      name: Content-Type
      in: header
      description: |
        Specifies the format of the request body, which must be JSON.
      required: true
      schema:
        type: string
        enum:
        - application/json
    authorizationWriteScopeHeader:
      name: Authorization
      in: header
      description: |
        An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
      required: true
      schema:
        type: string
        example: Bearer bb7fed3fe10dd235a2ccda3d50fb
    testScenarioHeader:
      name: Gov-Test-Scenario
      in: header
      description: |
        Only in sandbox environment. See Test Data table for all header values.
      required: false
      schema:
        type: string
  examples:
    formatNino:
      description: The format of the supplied NINO field is not valid.
      value:
        code: FORMAT_NINO
        message: The provided NINO is invalid
    formatSavingsAccountId:
      description: The format of the supplied savings account ID is not valid
      value:
        code: FORMAT_SAVINGS_ACCOUNT_ID
        message: The format of the supplied savings account ID is not valid
    formatAccountName:
      description: The format of the supplied account name field is not valid.
      value:
        code: FORMAT_ACCOUNT_NAME
        message: The provided account name is invalid
    ruleIncorrectOrEmptyBody:
      description: An empty or non-matching body was submitted.
      value:
        code: RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED
        message: An empty or non-matching body was submitted
    ruleIncorrectGovTestScenario:
      description: The request did not match any available Sandbox data. Check that
        the supplied Gov-Test-Scenario is correct for this endpoint version. This
        error will only be returned in the Sandbox environment.
      value:
        code: RULE_INCORRECT_GOV_TEST_SCENARIO
        message: The supplied Gov-Test-Scenario is not valid
    clientOrAgentNotAuthorised:
      description: "The client or agent is not authorised. This is because: the client\
        \ is not subscribed to MTD, \nthe agent is not subscribed to Agent Services,\
        \ or the client has not authorised the agent to act on their behalf.\n"
      value:
        code: CLIENT_OR_AGENT_NOT_AUTHORISED
        message: The client and/or agent is not authorised
    notFound:
      description: The supplied income source could not be found.
      value:
        code: MATCHING_RESOURCE_NOT_FOUND
        message: Matching resource not found
    requestCannotBeFulfilled:
      description: The request cannot be fulfilled. More specific information is provided
        in the error message.
      value:
        code: RULE_REQUEST_CANNOT_BE_FULFILLED
        message: Custom (will vary in production depending on the actual error)
  headers:
    correlationId:
      description: |
        Unique ID for operation tracking
        String, 36 characters.
      required: true
      schema:
        type: string
        example: c75f40a6-a3df-4429-a697-471eeec46435
    deprecationHeader:
      description: |
        The deprecation date/time for this endpoint.
      required: false
      schema:
        type: string
        example: "Sun, 01 Jan 2023 23:59:59 GMT"
    sunsetHeader:
      description: |
        The earliest date/time this endpoint will become unavailable after deprecation.
      required: false
      schema:
        type: string
        example: "Sun, 02 Jul 2023 23:59:59 GMT"
    linkHeader:
      description: |
        URL of the documentation for the API.
      required: false
      schema:
        type: string
        example: https://developer.service.hmrc.gov.uk/api-documentation/docs/api/service/individuals-savings-income-api
  securitySchemes:
    User-Restricted:
      type: oauth2
      description: "HMRC supports OAuth 2.0 for authenticating [User-restricted](https://developer.service.hmrc.gov.uk/api-documentation/docs/authorisation/user-restricted-endpoints)\
        \ API requests"
      flows:
        authorizationCode:
          authorizationUrl: https://api.service.hmrc.gov.uk/oauth/authorize
          tokenUrl: https://api.service.hmrc.gov.uk/oauth/token
          refreshUrl: https://api.service.hmrc.gov.uk/oauth/refresh
          scopes:
            write:self-assessment: Grant write access
            read:self-assessment: Grant read access

openapi: 3.0.3
info:
  title: Business Income Source Summary (MTD)
  description: "# Send fraud prevention data\nHMRC monitors transactions to help protect\
    \ your customers' confidential data from criminals and fraudsters. \n\n<div class=\"\
    govuk-warning-text warning-icon-fix\">\n  <span class=\"govuk-warning-text__icon\
    \ warning-icon-ui-fix\" aria-hidden=\"true\">!</span>\n  <strong class=\"govuk-warning-text__text\"\
    >\n    <span class=\"govuk-warning-text__assistive\">Warning</span>\n    You are\
    \ required by law to submit header data for this API. This includes all associated\
    \ APIs and endpoints.\n  </strong>\n</div>\n\n[Check the data you need to send](/guides/fraud-prevention/).\
    \ You can also use the [Test API](/api-documentation/docs/api/service/txm-fph-validator-api/1.0)\
    \ during initial development and as part of your quality assurance checks.\n\n\
    # Changelog\nYou can find the changelog in the [income-tax-mtd-changelog](https://github.com/hmrc/income-tax-mtd-changelog/#readme)\
    \ GitHub wiki.\n\n\n# Support\n\n* Direct reports of bugs or errors in Production\
    \ or Sandbox code, or queries about HMRC business functionality (such as how a\
    \ specific field is used by HMRC or why it is needed) to the [Software Development\
    \ Support Team (SDST)](https://developer.service.hmrc.gov.uk/developer/support).\n\
    * Send queries or feedback related to the design of the APIs (including recommended\
    \ changes) using the [income-tax-mtd-changelog](https://github.com/hmrc/income-tax-mtd-changelog/issues)\
    \ GitHub page.\n* <a href=\"/contact/report-technical-problem?newTab=true&service=api-documentation-frontend\"\
    \ target=\"_blank\">Is this page not working properly? (opens in new tab)</a>\n"
  version: "3.0"
servers:
- url: https://test-api.service.hmrc.gov.uk
  description: Sandbox
- url: https://api.service.hmrc.gov.uk
  description: Production
paths:
  /individuals/self-assessment/income-summary/{nino}/{typeOfBusiness}/{taxYear}/{businessId}:
    get:
      summary: Retrieve a Business Income Source Summary (BISS)
      description: "This endpoint enables you to retrieve a running (year-to-date)\
        \ summary of the income and expenditure for a \nspecified self-employment\
        \ or property business during a tax year. \nA National Insurance number, business\
        \ ID, tax year and type of business are required.\n\n<strong>\n  Note: From\
        \ tax year 2025-26 onwards the following business types are no longer valid:\n\
        \    <ul>\n      <li>foreign-property-fhl-eea</li>\n      <li>uk-property-fhl</li>\n\
        \    </ul>\n</strong>\n\n### Test data\nScenario simulation using Gov-Test-Scenario\
        \ headers is only available in the sandbox environment.\n\n| Header Value\
        \ (Gov-Test-Scenario) | Scenario                                         \
        \             |\n|----------------------------------|---------------------------------------------------------------|\n\
        | N/A - DEFAULT                    | Simulates success response with total,\
        \ profit and loss values.|\n| NOT_FOUND                        | Simulates\
        \ the scenario where no data is found.                |\n| NO_INCOME_SUBMISSIONS_EXIST\
        \      | Simulates the scenario where no income submissions exist.     |\n"
      parameters:
      - name: nino
        in: path
        description: |
          National Insurance number, in the format `AA999999A`
        required: true
        schema:
          type: string
          example: TC663795B
      - name: businessId
        in: path
        description: |
          An identifier for the business, unique to the customer.<p>Must conform to the regular expression `^X[A-Z0-9]{1}IS[0-9]{11}$`
        required: true
        schema:
          pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
          type: string
          example: XAIS12345678910
      - name: taxYear
        in: path
        description: |
          The tax year to which the data applies. For example: 2022-23. The start year and end year must not span two tax years.
          The minimum tax year is 2022-23. No gaps are allowed, for example, 2022-24 is not valid. (The minimum tax year in Sandbox is 2021-22.)
        required: true
        schema:
          type: string
          example: 2022-23
      - name: typeOfBusiness
        in: path
        description: |
          The type of business the summary calculation is for.

          Limited to the following possible values for tax years before 2025-26:

          - foreign-property-fhl-eea
          - foreign-property
          - uk-property
          - uk-property-fhl
          - self-employment

          Limited to the following possible values for tax year 2025-26 onwards:

          - foreign-property
          - uk-property
          - self-employment
        required: true
        schema:
          type: string
          enum:
          - foreign-property-fhl-eea
          - foreign-property
          - uk-property
          - uk-property-fhl
          - self-employment
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.3.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *read:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      - name: Gov-Test-Scenario
        in: header
        description: |
          Only in sandbox environment. See Test Data table for all header values.
        required: false
        schema:
          type: string
          example: "-"
      responses:
        "200":
          description: Success
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
            Deprecation:
              description: |
                The deprecation date/time for this endpoint.
              required: false
              schema:
                type: string
                example: "Sun, 01 Jan 2023 23:59:59 GMT"
            Sunset:
              description: |
                The earliest date/time this endpoint will become unavailable after deprecation.
              required: false
              schema:
                type: string
                example: "Sun, 02 Jul 2023 23:59:59 GMT"
            Link:
              description: |
                URL of the documentation for the API.
              required: false
              schema:
                type: string
                example: https://developer.service.hmrc.gov.uk/api-documentation/docs/api/service/self-assessment-biss-api
          content:
            application/json:
              schema:
                title: Retrieve a Business Income Source Summary Response
                required:
                - loss
                - profit
                - total
                type: object
                properties:
                  total:
                    required:
                    - expenses
                    - income
                    type: object
                    properties:
                      income:
                        type: number
                        description: The total income for the income source. The value
                          must be between 0 and 99999999999.99 up to 2 decimal places.
                        example: 100.00
                      expenses:
                        type: number
                        description: The total expenses for the income source. The
                          value must be between -99999999999.99 and 99999999999.99
                          up to 2 decimal places.
                        example: 50.00
                      additions:
                        type: number
                        description: The total additions to net profit (or deduction
                          to net loss). The value must be between -99999999999.99
                          and 99999999999.99 up to 2 decimal places.
                        example: 5.00
                      deductions:
                        type: number
                        description: The total deductions to net loss (or addition
                          to net profit). The value must be between 0 and 99999999999.99
                          up to 2 decimal places.
                        example: 60.00
                      accountingAdjustments:
                        type: number
                        description: "Adjustment for change of accounting practice,\
                          \ for example, cash basis to accrual accounting. The value\
                          \ must be between -99999999999.99 and 99999999999.99 up\
                          \ to 2 decimal places."
                        example: -30.00
                    description: Object of total values.
                  profit:
                    required:
                    - net
                    - taxable
                    type: object
                    properties:
                      net:
                        type: number
                        description: The net profit of income source. The value must
                          be between 0 and 99999999999.99 up to 2 decimal places.
                        example: 20.00
                      taxable:
                        type: number
                        description: The taxable net profit of the income source.
                          The value must be between 0 and 99999999999.99 up to 2 decimal
                          places.
                        example: 0.00
                    description: Object of profit values.
                  loss:
                    required:
                    - net
                    - taxable
                    type: object
                    properties:
                      net:
                        type: number
                        description: The net loss of income source. The value must
                          be between 0 and 99999999999.99 up to 2 decimal places.
                        example: 0.00
                      taxable:
                        type: number
                        description: The taxable net loss of the income source. The
                          value must be between 0 and 99999999999.99 up to 2 decimal
                          places.
                        example: 35.00
                    description: Object of loss values.
                description: Retrieve a Business Income Source Summary Response
              examples:
                example-1:
                  description: Example response given any tax year
                  value:
                    $ref: ./examples/retrieveBiss/def1/response.json
        "400":
          description: Bad request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_NINO:
                  description: |
                    The format of the supplied NINO field is not valid.
                  value:
                    code: FORMAT_NINO
                    message: The provided NINO is invalid
                FORMAT_TAX_YEAR:
                  description: |
                    The format of the supplied taxYear value is not valid.
                  value:
                    code: FORMAT_TAX_YEAR
                    message: The provided tax year is invalid
                RULE_TAX_YEAR_RANGE_INVALID:
                  description: |
                    Tax year range invalid. A tax year range of one year is required.
                  value:
                    code: RULE_TAX_YEAR_RANGE_INVALID
                    message: Tax year range invalid. A tax year range of one year
                      is required
                FORMAT_TYPE_OF_BUSINESS:
                  description: |
                    The format of the supplied type of business is not valid.
                  value:
                    code: FORMAT_TYPE_OF_BUSINESS
                    message: The provided typeOfBusiness is invalid
                FORMAT_BUSINESS_ID:
                  description: |
                    The format of the supplied Business ID field is not valid.
                  value:
                    code: FORMAT_BUSINESS_ID
                    message: The provided businessId is invalid
                RULE_TAX_YEAR_NOT_SUPPORTED:
                  description: |
                    The specified tax year is not supported. Either the tax year specified is before the minimum tax year value, or it is after the maximum tax year value.
                  value:
                    code: RULE_TAX_YEAR_NOT_SUPPORTED
                    message: The tax year specified does not lie within the supported
                      range
                RULE_NO_INCOME_SUBMISSIONS_EXIST:
                  description: |
                    No income submissions exist for the supplied income source.
                  value:
                    code: RULE_NO_INCOME_SUBMISSIONS_EXIST
                    message: No income submissions exist
                RULE_INCORRECT_GOV_TEST_SCENARIO:
                  description: |
                    The request did not match any available Sandbox data. Check that the supplied Gov-Test-Scenario is correct for this endpoint version. This error will only be returned in the Sandbox environment.
                  value:
                    code: RULE_INCORRECT_GOV_TEST_SCENARIO
                    message: The supplied Gov-Test-Scenario is not valid
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: |
                    The client or agent is not authorised. This is because the client is not subscribed to MTD, the agent is not subscribed to Agent Services, or the client has not authorised the agent to act on their behalf.
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
        "404":
          description: Not Found
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                MATCHING_RESOURCE_NOT_FOUND:
                  description: |
                    The supplied income source could not be found.
                  value:
                    code: MATCHING_RESOURCE_NOT_FOUND
                    message: Matching resource not found
      security:
      - User-Restricted:
        - read:self-assessment
components:
  schemas:
    response:
      title: Retrieve a Business Income Source Summary Response
      required:
      - loss
      - profit
      - total
      type: object
      properties:
        total:
          required:
          - expenses
          - income
          type: object
          properties:
            income:
              type: number
              description: The total income for the income source. The value must
                be between 0 and 99999999999.99 up to 2 decimal places.
              example: 100.00
            expenses:
              type: number
              description: The total expenses for the income source. The value must
                be between -99999999999.99 and 99999999999.99 up to 2 decimal places.
              example: 50.00
            additions:
              type: number
              description: The total additions to net profit (or deduction to net
                loss). The value must be between -99999999999.99 and 99999999999.99
                up to 2 decimal places.
              example: 5.00
            deductions:
              type: number
              description: The total deductions to net loss (or addition to net profit).
                The value must be between 0 and 99999999999.99 up to 2 decimal places.
              example: 60.00
            accountingAdjustments:
              type: number
              description: "Adjustment for change of accounting practice, for example,\
                \ cash basis to accrual accounting. The value must be between -99999999999.99\
                \ and 99999999999.99 up to 2 decimal places."
              example: -30.00
          description: Object of total values.
        profit:
          required:
          - net
          - taxable
          type: object
          properties:
            net:
              type: number
              description: The net profit of income source. The value must be between
                0 and 99999999999.99 up to 2 decimal places.
              example: 20.00
            taxable:
              type: number
              description: The taxable net profit of the income source. The value
                must be between 0 and 99999999999.99 up to 2 decimal places.
              example: 0.00
          description: Object of profit values.
        loss:
          required:
          - net
          - taxable
          type: object
          properties:
            net:
              type: number
              description: The net loss of income source. The value must be between
                0 and 99999999999.99 up to 2 decimal places.
              example: 0.00
            taxable:
              type: number
              description: The taxable net loss of the income source. The value must
                be between 0 and 99999999999.99 up to 2 decimal places.
              example: 35.00
          description: Object of loss values.
      description: Retrieve a Business Income Source Summary Response
    error-response:
      required:
      - code
      type: object
      properties:
        code:
          type: string
          description: The error code
        message:
          type: string
          description: The error message
      description: Error Response
  parameters:
    nino:
      name: nino
      in: path
      description: |
        National Insurance number, in the format `AA999999A`
      required: true
      schema:
        type: string
        example: TC663795B
    businessId:
      name: businessId
      in: path
      description: |
        An identifier for the business, unique to the customer.<p>Must conform to the regular expression `^X[A-Z0-9]{1}IS[0-9]{11}$`
      required: true
      schema:
        pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
        type: string
        example: XAIS12345678910
    taxYear:
      name: taxYear
      in: path
      description: |
        The tax year to which the data applies. For example: 2022-23. The start year and end year must not span two tax years.
        The minimum tax year is 2022-23. No gaps are allowed, for example, 2022-24 is not valid. (The minimum tax year in Sandbox is 2021-22.)
      required: true
      schema:
        type: string
        example: 2022-23
    typeOfBusiness:
      name: typeOfBusiness
      in: path
      description: |
        The type of business the summary calculation is for.

        Limited to the following possible values for tax years before 2025-26:

        - foreign-property-fhl-eea
        - foreign-property
        - uk-property
        - uk-property-fhl
        - self-employment

        Limited to the following possible values for tax year 2025-26 onwards:

        - foreign-property
        - uk-property
        - self-employment
      required: true
      schema:
        type: string
        enum:
        - foreign-property-fhl-eea
        - foreign-property
        - uk-property
        - uk-property-fhl
        - self-employment
    acceptJson:
      name: Accept
      in: header
      description: |
        Specifies the response format and the version of the API to be used.
      required: true
      schema:
        type: string
        enum:
        - application/vnd.hmrc.3.0+json
    authorizationReadScope:
      name: Authorization
      in: header
      description: |
        An OAuth 2.0 Bearer Token with the *read:self-assessment* scope.
      required: true
      schema:
        type: string
        example: Bearer bb7fed3fe10dd235a2ccda3d50fb
    testScenarioHeader:
      name: Gov-Test-Scenario
      in: header
      description: |
        Only in sandbox environment. See Test Data table for all header values.
      required: false
      schema:
        type: string
        example: "-"
  examples:
    formatNino:
      description: |
        The format of the supplied NINO field is not valid.
      value:
        code: FORMAT_NINO
        message: The provided NINO is invalid
    formatTaxYear:
      description: |
        The format of the supplied taxYear value is not valid.
      value:
        code: FORMAT_TAX_YEAR
        message: The provided tax year is invalid
    ruleTaxYearRangeInvalid:
      description: |
        Tax year range invalid. A tax year range of one year is required.
      value:
        code: RULE_TAX_YEAR_RANGE_INVALID
        message: Tax year range invalid. A tax year range of one year is required
    formatTypeOfBusiness:
      description: |
        The format of the supplied type of business is not valid.
      value:
        code: FORMAT_TYPE_OF_BUSINESS
        message: The provided typeOfBusiness is invalid
    formatBusinessId:
      description: |
        The format of the supplied Business ID field is not valid.
      value:
        code: FORMAT_BUSINESS_ID
        message: The provided businessId is invalid
    ruleTaxYearNotSupported:
      description: |
        The specified tax year is not supported. Either the tax year specified is before the minimum tax year value, or it is after the maximum tax year value.
      value:
        code: RULE_TAX_YEAR_NOT_SUPPORTED
        message: The tax year specified does not lie within the supported range
    noIncomeSubmissionsExist:
      description: |
        No income submissions exist for the supplied income source.
      value:
        code: RULE_NO_INCOME_SUBMISSIONS_EXIST
        message: No income submissions exist
    ruleIncorrectGovTestScenario:
      description: |
        The request did not match any available Sandbox data. Check that the supplied Gov-Test-Scenario is correct for this endpoint version. This error will only be returned in the Sandbox environment.
      value:
        code: RULE_INCORRECT_GOV_TEST_SCENARIO
        message: The supplied Gov-Test-Scenario is not valid
    clientOrAgentNotAuthorised:
      description: |
        The client or agent is not authorised. This is because the client is not subscribed to MTD, the agent is not subscribed to Agent Services, or the client has not authorised the agent to act on their behalf.
      value:
        code: CLIENT_OR_AGENT_NOT_AUTHORISED
        message: The client and/or agent is not authorised
    notFoundIncomeSource:
      description: |
        The supplied income source could not be found.
      value:
        code: MATCHING_RESOURCE_NOT_FOUND
        message: Matching resource not found
  headers:
    correlationId:
      description: |
        Unique ID for operation tracking
        String, 36 characters.
      required: true
      schema:
        type: string
        example: c75f40a6-a3df-4429-a697-471eeec46435
    deprecationHeader:
      description: |
        The deprecation date/time for this endpoint.
      required: false
      schema:
        type: string
        example: "Sun, 01 Jan 2023 23:59:59 GMT"
    sunsetHeader:
      description: |
        The earliest date/time this endpoint will become unavailable after deprecation.
      required: false
      schema:
        type: string
        example: "Sun, 02 Jul 2023 23:59:59 GMT"
    linkHeader:
      description: |
        URL of the documentation for the API.
      required: false
      schema:
        type: string
        example: https://developer.service.hmrc.gov.uk/api-documentation/docs/api/service/self-assessment-biss-api
  securitySchemes:
    User-Restricted:
      type: oauth2
      description: "HMRC supports OAuth 2.0 for authenticating [User-restricted](https://developer.service.hmrc.gov.uk/api-documentation/docs/authorisation/user-restricted-endpoints)\
        \ API requests"
      flows:
        authorizationCode:
          authorizationUrl: https://api.service.hmrc.gov.uk/oauth/authorize
          tokenUrl: https://api.service.hmrc.gov.uk/oauth/token
          refreshUrl: https://api.service.hmrc.gov.uk/oauth/refresh
          scopes:
            write:self-assessment: Grant write access
            read:self-assessment: Grant read access

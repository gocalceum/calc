openapi: 3.0.3
info:
  title: Self Assessment Test Support (MTD)
  description: |
    # Changelog
    The changelog is [available here](https://github.com/hmrc/income-tax-mtd-changelog/#readme).

    # Support

    * Direct reports of bugs or errors in Production or Sandbox code, or queries about HMRC business functionality (such as how a specific field is used by HMRC or why it is needed) to the [Software Development Support Team (SDST)](https://developer.service.hmrc.gov.uk/developer/support).
    * Send queries or feedback related to the design of the APIs (including recommended changes) using the [income-tax-mtd-changelog](https://github.com/hmrc/income-tax-mtd-changelog/issues) GitHub page.
    * <a href="/contact/report-technical-problem?newTab=true&service=api-documentation-frontend" target="_blank">Is this page not working properly? (opens in new tab)</a>
  version: "1.0"
servers:
- url: https://test-api.service.hmrc.gov.uk
  description: Sandbox
paths:
  /individuals/self-assessment-test-support/vendor-state:
    delete:
      summary: Delete Stateful Test Data
      parameters:
      - name: nino
        in: query
        description: "National Insurance number, in the format `AA999999A`. \n\nIf\
          \ supplied, the endpoint deletes only stateful test data stored against\
          \ the vendor that is associated with the specified National Insurance number.\n"
        schema:
          type: string
          example: TC663795B
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/vendor-state/checkpoints:
    get:
      summary: List Checkpoints
      security:
      - User-Restricted:
        - read:self-assessment
    post:
      summary: Create a Checkpoint
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/vendor-state/checkpoints/{checkpointId}:
    delete:
      tags:
      - Checkpoint for Vendor Data
      summary: Delete a Checkpoint
      description: |
        This endpoint enables you to delete a checkpoint created in the sandbox, specified with a ‘checkpointId’.

        Any checkpoint that is not deleted is automatically removed from the database 7 days after its creation.

        Checkpoints can only be deleted with this endpoint. Deleting data with the Delete Stateful Test Data endpoint will not delete checkpoints.

        **Note**: To prevent data loss or unexpected behaviour, the checkpoint delete should not be performed while other stateful checkpoint operations are in progress for the same National Insurance number.
      parameters:
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      - name: checkpointId
        in: path
        description: |
          The unique identifier of the checkpoint returned by the 'Create a checkpoint' endpoint. Format: ^[A-Za-z0-9\-]{36}$
        required: true
        schema:
          type: string
          example: a1e8057e-fbbc-47a8-a8b4-78d9f015c253
      responses:
        "204":
          description: Success
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
        "400":
          description: Bad Request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_CHECKPOINT_ID:
                  description: The format of the supplied Checkpoint ID field is not
                    valid.
                  value:
                    code: FORMAT_CHECKPOINT_ID
                    message: The provided checkpoint ID is invalid
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client and/or agent is not authorised. This is\
                    \ normally because: the client is not subscribed to MTD, \nthe\
                    \ agent is not subscribed to Agent Services, or the client has\
                    \ not authorised the agent to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
        "404":
          description: Not Found
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                MATCHING_RESOURCE_NOT_FOUND:
                  description: No checkpoint found for the passed Checkpoint ID.
                  value:
                    code: MATCHING_RESOURCE_NOT_FOUND
                    message: Matching resource not found
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/vendor-state/checkpoints/{checkpointId}/restore:
    post:
      tags:
      - Checkpoint for Vendor Data
      summary: Restore to Checkpoint
      description: |
        This endpoint enables you to reset the stateful data back to the checkpoint created in the sandbox environment.

        A valid checkpoint ID must be provided.

        When you restore the checkpoint, the modified date of the data will be updated to the restored date.

        **Note**: To prevent data loss or unexpected behaviour, the checkpoint restore should not be performed while any other stateful or checkpoint operations are in progress for the same National Insurance number.
      parameters:
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      - name: checkpointId
        in: path
        description: |
          The unique identifier of the checkpoint returned by the 'Create a checkpoint' endpoint. Format: ^[A-Za-z0-9\-]{36}$
        required: true
        schema:
          type: string
          example: a1e8057e-fbbc-47a8-a8b4-78d9f015c253
      responses:
        "201":
          description: Success
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                title: Restore a checkpoint
                type: object
                properties:
                  links:
                    type: array
                    items:
                      required:
                      - href
                      - method
                      - rel
                      type: object
                      properties:
                        href:
                          type: string
                          description: The relative url of the endpoint.
                          example: /individuals/self-assessment-test-support/vendor-state/checkpoints
                        method:
                          type: string
                          description: The HTTP method type for the endpoint.
                          enum:
                          - DELETE
                        rel:
                          type: string
                          description: |-
                            A label for the endpoint, which describes how it is related to the current resource
                            The rel will be self where the action is retrieval of the same resource.
                          enum:
                          - delete-checkpoint
                      additionalProperties: false
                      description: A list of endpoint links that indicate possible
                        actions related to the current resource.
                additionalProperties: false
              examples:
                example-response:
                  description: Example Response
                  value:
                    $ref: ./examples/checkpoints/restore_response.json
        "400":
          description: Bad Request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_CHECKPOINT_ID:
                  description: The format of the supplied Checkpoint ID field is not
                    valid.
                  value:
                    code: FORMAT_CHECKPOINT_ID
                    message: The provided checkpoint ID is invalid
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client and/or agent is not authorised. This is\
                    \ normally because: the client is not subscribed to MTD, \nthe\
                    \ agent is not subscribed to Agent Services, or the client has\
                    \ not authorised the agent to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
        "404":
          description: Not Found
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                MATCHING_RESOURCE_NOT_FOUND:
                  description: No checkpoint found for the passed Checkpoint ID.
                  value:
                    code: MATCHING_RESOURCE_NOT_FOUND
                    message: Matching resource not found
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/business/{nino}:
    post:
      tags:
      - Business Income Source
      summary: Create a Test Business
      description: "This endpoint enables you to create a test business for use within\
        \ the Sandbox environment.\n\nCustomers may have multiple Self-Employment\
        \ businesses, but only one of each Property business is allowed. \nMTD supports\
        \ only one accounting period per year so this must be a full tax year period,\
        \ for example April 6th to April 5th. \nTest businesses are automatically\
        \ purged from the database 7 days after creation.\n"
      parameters:
      - name: nino
        in: path
        description: |
          National Insurance number.
        required: true
        schema:
          pattern: "^((?!(BG|GB|KN|NK|NT|TN|ZZ)|(D|F|I|Q|U|V)[A-Z]|[A-Z](D|F|I|O|Q|U|V))[A-Z]{2})[0-9]{6}[A-D]$"
          type: string
          example: TC663795B
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      requestBody:
        content:
          application/json:
            schema:
              title: Create a Test Business
              required:
              - typeOfBusiness
              type: object
              properties:
                typeOfBusiness:
                  type: string
                  description: The type of business income source.
                  enum:
                  - self-employment
                  - uk-property
                  - foreign-property
                  - property-unspecified
                tradingName:
                  type: string
                  description: |-
                    The trading name of the business.

                    Forbidden for property businesses.

                    Mandatory for self-employment businesses.
                  example: ABC Ltd.
                firstAccountingPeriodStartDate:
                  type: string
                  description: The first accounting period start date
                  format: YYYY-MM-DD
                  example: 2019-09-30
                firstAccountingPeriodEndDate:
                  type: string
                  description: The first accounting period end date
                  format: YYYY-MM-DD
                  example: 2020-02-29
                latencyDetails:
                  required:
                  - latencyEndDate
                  - latencyIndicator1
                  - latencyIndicator2
                  - taxYear1
                  - taxYear2
                  type: object
                  properties:
                    latencyEndDate:
                      type: string
                      description: End date of latency period for the income source.
                      format: YYYY-MM-DD
                      example: 2020-02-27
                    taxYear1:
                      maximum: 7
                      minimum: 7
                      type: string
                      description: First tax year for the income source.
                      format: YYYY-YY
                      example: 2018-19
                    latencyIndicator1:
                      type: string
                      description: "Self assessment submission frequency ('A' - Annual,\
                        \ 'Q' - Quarterly)."
                      example: A
                      enum:
                      - A
                      - Q
                    taxYear2:
                      maximum: 7
                      minimum: 7
                      type: string
                      description: Second tax year for the income source.
                      format: YYYY-YY
                      example: 2019-20
                    latencyIndicator2:
                      type: string
                      description: "Self assessment submission frequency ('A' - Annual,\
                        \ 'Q' - Quarterly)."
                      example: A
                      enum:
                      - A
                      - Q
                  description: Income source latency details
                quarterlyTypeChoice:
                  type: object
                  properties:
                    quarterlyPeriodType:
                      type: string
                      description: The quarterly period type that is being chosen
                        for the business ID.
                      enum:
                      - standard
                      - calendar
                    taxYearOfChoice:
                      type: string
                      description: The tax year for which the quarterly period type
                        was chosen.
                      format: "^2[0-9]{3}-[0-9]{2}$"
                  description: Quarterly reporting period type
                accountingType:
                  type: string
                  description: "CASH if you used the cash basis, money actually received\
                    \ and paid out, to calculate your income and expenses. Otherwise\
                    \ ACCRUALS."
                  enum:
                  - CASH
                  - ACCRUALS
                commencementDate:
                  type: string
                  description: "Business start date, must be in the past."
                  format: YYYY-MM-DD
                  example: 2016-09-24
                cessationDate:
                  type: string
                  description: Business cessation date.
                  format: YYYY-MM-DD
                  example: 2020-03-24
                businessAddressLineOne:
                  maximum: 35
                  type: string
                  description: |-
                    First line of the business address.

                    Forbidden for property businesses.

                    Mandatory for self-employment businesses.
                  example: 1 ABC Rd.
                businessAddressLineTwo:
                  maximum: 35
                  type: string
                  description: |-
                    Second line of the business address.

                    Forbidden for property businesses.
                  example: London
                businessAddressLineThree:
                  maximum: 35
                  type: string
                  description: |-
                    Third line of the business address.

                    Forbidden for property businesses.
                  example: Greater London
                businessAddressLineFour:
                  maximum: 35
                  type: string
                  description: |-
                    Fourth line of the business address.

                    Forbidden for property businesses.
                  example: United Kingdom
                businessAddressPostcode:
                  pattern: "^[A-Z]{1,2}[0-9][0-9A-Z]?\\s?[0-9][A-Z]{2}|BFPO\\s?[0-9]{1,10}$"
                  type: string
                  description: |-
                    Business postcode.

                    Forbidden for property businesses.

                    Mandatory for self-employment businesses if businessAddressCountryCode "GB" is provided.
                  example: M1 1AG
                businessAddressCountryCode:
                  type: string
                  description: |-
                    The two letter code for a country must adhere to ISO 3166.

                    Forbidden for property businesses.

                    Mandatory for self-employment businesses.
                  example: GB
              additionalProperties: false
            examples:
              uk-property-request:
                description: Create a UK property request
                value:
                  $ref: ./examples/businesses/create_request_uk_property.json
              foreign-property-request:
                description: Create a foreign property request
                value:
                  $ref: ./examples/businesses/create_request_foreign_property.json
              self-employment-business-request:
                description: Create a self employment business request
                value:
                  $ref: ./examples/businesses/create_request_self_employment_business.json
      responses:
        "201":
          description: Success
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                title: Create a Test Business
                type: object
                properties:
                  businessId:
                    pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
                    type: string
                    description: A unique identifier for the business income source.
                  links:
                    type: array
                    items:
                      required:
                      - href
                      - method
                      - rel
                      type: object
                      properties:
                        href:
                          type: string
                          description: The relative url of the endpoint.
                          example: /individuals/self-assessment-test-support/business/ET009363D
                        method:
                          type: string
                          description: The HTTP method type for the endpoint.
                          enum:
                          - GET
                          - DELETE
                        rel:
                          type: string
                          description: |-
                            A label for the endpoint, which describes how it is related to the current resource
                            The rel will be self where the action is retrieval of the same resource.
                          enum:
                          - self
                          - delete-business
                      additionalProperties: false
                      description: A list of endpoint links that indicate possible
                        actions related to the current resource.
                additionalProperties: false
              examples:
                example-response:
                  description: Example Response
                  value:
                    $ref: ./examples/businesses/create_response.json
        "400":
          description: Bad request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_NINO:
                  description: The format of the supplied NINO is not valid.
                  value:
                    code: FORMAT_NINO
                    message: The provided NINO is invalid
                FORMAT_TYPE_OF_BUSINESS:
                  description: |
                    The format of the type of business field is not valid.
                  value:
                    code: FORMAT_TYPE_OF_BUSINESS
                    message: The provided typeOfBusiness field is invalid
                FORMAT_DATE:
                  description: |
                    The supplied date format is not valid.
                  value:
                    code: FORMAT_DATE
                    message: The supplied date format is not valid
                FORMAT_TAX_YEAR:
                  description: The format of the supplied taxYear value is not valid.
                  value:
                    code: FORMAT_TAX_YEAR
                    message: The provided tax year is invalid
                FORMAT_ACCOUNTING_TYPE:
                  description: |
                    The format of the accounting type field is not valid.
                  value:
                    code: FORMAT_ACCOUNTING_TYPE
                    message: The provided accountingType field is invalid
                FORMAT_POSTCODE:
                  description: |
                    The format of the postcode field is not valid.
                  value:
                    code: FORMAT_POSTCODE
                    message: The provided businessAddressPostcode is invalid
                FORMAT_LATENCY_INDICATOR:
                  description: |
                    The format of a latency indicator fields must be "A" or "Q".
                  value:
                    code: FORMAT_LATENCY_INDICATOR
                    message: The format of a latency indicator field is incorrect
                MISSING_POSTCODE:
                  description: |
                    The businessAddressPostcode is mandatory when businessAddressCountryCode is "GB".
                  value:
                    code: MISSING_POSTCODE
                    message: Missing postcode
                FORMAT_COUNTRY_CODE:
                  description: |
                    The businessAddressCountryCode must be an ISO3166 2-letter country code.
                  value:
                    code: FORMAT_COUNTRY_CODE
                    message: The provided country code is invalid
                RULE_COMMENCEMENT_DATE_NOT_SUPPORTED:
                  description: |
                    The commencement date specified is not in the past.
                  value:
                    code: RULE_COMMENCEMENT_DATE_NOT_SUPPORTED
                    message: The specified commencementDate must be in the past
                RULE_PROPERTY_BUSINESS_ADDED:
                  description: |
                    A maximum of one property business for each type "uk-property", "foreign-property" and "property-unspecified" is allowed.
                  value:
                    code: RULE_PROPERTY_BUSINESS_ADDED
                    message: The provided property business is already added
                RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED:
                  description: |
                    An empty or non-matching body was submitted.
                  value:
                    code: RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED
                    message: An empty or non-matching body was submitted
                RULE_TAX_YEAR_RANGE_INVALID:
                  description: Tax year range invalid. A tax year range of one year
                    is required.
                  value:
                    code: RULE_TAX_YEAR_RANGE_INVALID
                    message: The tax year range is invalid
                MISSING_FIRST_ACCOUNTING_PERIOD_START_DATE:
                  description: "When firstAccountingPeriodEndDate is provided, firstAccountingPeriodStartDate\
                    \ must also be provided."
                  value:
                    code: MISSING_FIRST_ACCOUNTING_PERIOD_START_DATE
                    message: Missing firstAccountingPeriodStartDate value
                MISSING_FIRST_ACCOUNTING_PERIOD_END_DATE:
                  description: "When firstAccountingPeriodStartDate is provided, \
                    \ firstAccountingPeriodEndDate must also be provided."
                  value:
                    code: MISSING_FIRST_ACCOUNTING_PERIOD_END_DATE
                    message: Missing firstAccountingPeriodEndDate value
                RULE_FIRST_ACCOUNTING_DATE_RANGE_INVALID:
                  description: "The firstAccountingPeriodStartDate and firstAccountingPeriodEndDate\
                    \ must align with a single tax year - that is, the start date\
                    \ must be 6th April of one year and the end date must be 5th April\
                    \ of the following year."
                  value:
                    code: RULE_FIRST_ACCOUNTING_DATE_RANGE_INVALID
                    message: The first accounting period is not a single complete
                      tax year
                RULE_UNEXPECTED_BUSINESS_ADDRESS:
                  description: "When creating a property business, you are not allowed\
                    \ to provide any businessAddress fields."
                  value:
                    code: RULE_UNEXPECTED_BUSINESS_ADDRESS
                    message: Unexpected businessAddress provided for property business
                RULE_MISSING_BUSINESS_ADDRESS:
                  description: "When creating a self-employment business, you need\
                    \ to provide values for businessAddressLineOne and businessAddressCountryCode."
                  value:
                    code: RULE_MISSING_BUSINESS_ADDRESS
                    message: businessAddress not provided for the self-employment
                      business
                RULE_UNEXPECTED_TRADING_NAME:
                  description: "When creating a property business, you are not allowed\
                    \ to provide tradingName."
                  value:
                    code: RULE_UNEXPECTED_TRADING_NAME
                    message: Unexpected tradingName provided for property business
                RULE_MISSING_TRADING_NAME:
                  description: "When creating a self-employment business, you need\
                    \ to provide a tradingName value."
                  value:
                    code: RULE_MISSING_TRADING_NAME
                    message: tradingName not provided for the self-employment business
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client and/or agent is not authorised. This is\
                    \ normally because: the client is not subscribed to MTD, \nthe\
                    \ agent is not subscribed to Agent Services, or the client has\
                    \ not authorised the agent to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/business/{nino}/{businessId}:
    delete:
      tags:
      - Business Income Source
      summary: Delete a Test Business
      description: |
        This endpoint allows a developer to delete a test business that they previously created.
      parameters:
      - name: nino
        in: path
        description: |
          National Insurance number.
        required: true
        schema:
          pattern: "^((?!(BG|GB|KN|NK|NT|TN|ZZ)|(D|F|I|Q|U|V)[A-Z]|[A-Z](D|F|I|O|Q|U|V))[A-Z]{2})[0-9]{6}[A-D]$"
          type: string
          example: TC663795B
      - name: businessId
        in: path
        description: |
          An identifier for the business, unique to the customer.
        required: true
        schema:
          pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
          type: string
          example: XAIS12345678910
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      responses:
        "204":
          description: Success (No Content)
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
        "400":
          description: Bad request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_NINO:
                  description: The format of the supplied NINO is not valid.
                  value:
                    code: FORMAT_NINO
                    message: The provided NINO is invalid
                FORMAT_BUSINESS_ID:
                  description: |
                    The format of the supplied Business ID field is not valid.
                  value:
                    code: FORMAT_BUSINESS_ID
                    message: The provided Business ID is invalid
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client and/or agent is not authorised. This is\
                    \ normally because: the client is not subscribed to MTD, \nthe\
                    \ agent is not subscribed to Agent Services, or the client has\
                    \ not authorised the agent to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
        "404":
          description: Not Found
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                MATCHING_RESOURCE_NOT_FOUND:
                  description: The remote endpoint has indicated that no data can
                    be found for the given vendor.
                  value:
                    code: MATCHING_RESOURCE_NOT_FOUND
                    message: Matching resource not found
      security:
      - User-Restricted:
        - write:self-assessment
  /individuals/self-assessment-test-support/itsa-status/{nino}/{taxYear}:
    post:
      tags:
      - ITSA Status
      summary: Create and Amend Test ITSA Status
      description: |
        This endpoint enables you to create and amend a test ITSA status for a specified customer for use within the sandbox environment. The ITSA status provided is used to validate periodic and annual submissions for the customer's income sources.

        A National Insurance number and tax year must be provided.

        Any test ITSA status is automatically purged from the database 7 days after its creation.
      parameters:
      - name: nino
        in: path
        description: |
          National Insurance number.
        required: true
        schema:
          pattern: "^((?!(BG|GB|KN|NK|NT|TN|ZZ)|(D|F|I|Q|U|V)[A-Z]|[A-Z](D|F|I|O|Q|U|V))[A-Z]{2})[0-9]{6}[A-D]$"
          type: string
          example: TC663795B
      - name: taxYear
        in: path
        description: |
          The tax year to submit data for. The start year and end year must not span two tax years. No gaps are allowed - for example, 2023-25 is not valid. There is no minimum tax year.
        required: true
        schema:
          type: string
          format: YYYY-YY
          example: 2023-24
      - name: Accept
        in: header
        description: |
          Specifies the response format and the version of the API to be used.
        required: true
        schema:
          type: string
          enum:
          - application/vnd.hmrc.1.0+json
      - name: Authorization
        in: header
        description: |
          An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
        required: true
        schema:
          type: string
          example: Bearer bb7fed3fe10dd235a2ccda3d50fb
      requestBody:
        content:
          application/json:
            schema:
              title: Root Schema
              required:
              - itsaStatusDetails
              type: object
              properties:
                itsaStatusDetails:
                  type: array
                  items:
                    required:
                    - status
                    - statusReason
                    - submittedOn
                    type: object
                    properties:
                      submittedOn:
                        type: string
                        description: "The date the ITSA status was submitted, in the\
                          \ format YYYY-MM-DDThh:mm:ss.SSSZ"
                        format: YYYY-MM-DDThh:mm:ss.SSSZ
                      status:
                        type: string
                        description: The ITSA status for the tax year.
                        enum:
                        - No Status
                        - MTD Mandated
                        - MTD Voluntary
                        - Annual
                        - Non Digital
                        - Dormant
                        - MTD Exempt
                      statusReason:
                        type: string
                        description: The reason for the ITSA status.
                        enum:
                        - Sign up - return available
                        - Sign up - no return available
                        - ITSA final declaration
                        - ITSA Q4 declaration
                        - CESA SA return
                        - Complex
                        - Ceased income source
                        - Reinstated income source
                        - Rollover
                        - Income Source Latency Changes
                        - MTD ITSA Opt-Out
                        - MTD ITSA Opt-In
                        - Digitally Exempt
                      businessIncome2YearsPrior:
                        maximum: 99999999999.99
                        minimum: 0.0
                        type: number
                        description: |-
                          The business income for 2 years prior to the specified taxYear.

                          For example, if the tax year requested is 2026-27, then 'businessIncome2YearsPrior' is for the 2024-25 tax year.

                          For Q4 check, the business income 1 year prior will be used.
            examples:
              example-itsa-status-request:
                value:
                  $ref: ./examples/itsaStatus/create_amend_request.json
      responses:
        "204":
          description: Success (No Content)
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content: {}
        "400":
          description: Bad Request
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                FORMAT_NINO:
                  description: The format of the supplied NINO is not valid.
                  value:
                    code: FORMAT_NINO
                    message: The provided NINO is invalid
                FORMAT_TAX_YEAR:
                  description: The format of the supplied taxYear value is not valid.
                  value:
                    code: FORMAT_TAX_YEAR
                    message: The provided tax year is invalid
                RULE_TAX_YEAR_RANGE_INVALID:
                  description: Tax year range invalid. A tax year range of one year
                    is required.
                  value:
                    code: RULE_TAX_YEAR_RANGE_INVALID
                    message: The tax year range is invalid
                FORMAT_STATUS:
                  description: The format of the supplied status is not valid.
                  value:
                    code: FORMAT_STATUS
                    message: The provided status is invalid
                FORMAT_STATUS_REASON:
                  description: The format of the supplied status reason is not valid.
                  value:
                    code: FORMAT_STATUS_REASON
                    message: The provided status reason is invalid
                FORMAT_BUSINESS_INCOME_2_YEARS_PRIOR:
                  description: The format of the supplied businessIncome2YearsPrior
                    is not valid.
                  value:
                    code: FORMAT_BUSINESS_INCOME_2_YEARS_PRIOR
                    message: The provided business Income 2 Years Prior is invalid
                FORMAT_SUBMITTED_ON:
                  description: The format of the supplied submittedOn date is not
                    valid.
                  value:
                    code: FORMAT_SUBMITTED_ON
                    message: The provided submitted on date is invalid
                DUPLICATE_SUBMITTED_ON:
                  description: Two or more of the supplied records have the same submittedOn
                    value.
                  value:
                    code: DUPLICATE_SUBMITTED_ON
                    message: The provided submittedOn values are not unique
        "403":
          description: Forbidden
          headers:
            X-CorrelationId:
              description: |
                Unique ID for operation tracking
                String, 36 characters.
              required: true
              schema:
                type: string
                example: c75f40a6-a3df-4429-a697-471eeec46435
          content:
            application/json:
              schema:
                required:
                - code
                type: object
                properties:
                  code:
                    type: string
                    description: The error code
                  message:
                    type: string
                    description: The error message
                description: Error Response
              examples:
                CLIENT_OR_AGENT_NOT_AUTHORISED:
                  description: "The client and/or agent is not authorised. This is\
                    \ normally because: the client is not subscribed to MTD, \nthe\
                    \ agent is not subscribed to Agent Services, or the client has\
                    \ not authorised the agent to act on their behalf.\n"
                  value:
                    code: CLIENT_OR_AGENT_NOT_AUTHORISED
                    message: The client and/or agent is not authorised
      security:
      - User-Restricted:
        - write:self-assessment
components:
  schemas:
    error_response:
      required:
      - code
      type: object
      properties:
        code:
          type: string
          description: The error code
        message:
          type: string
          description: The error message
      description: Error Response
    restore_response:
      title: Restore a checkpoint
      type: object
      properties:
        links:
          type: array
          items:
            required:
            - href
            - method
            - rel
            type: object
            properties:
              href:
                type: string
                description: The relative url of the endpoint.
                example: /individuals/self-assessment-test-support/vendor-state/checkpoints
              method:
                type: string
                description: The HTTP method type for the endpoint.
                enum:
                - DELETE
              rel:
                type: string
                description: |-
                  A label for the endpoint, which describes how it is related to the current resource
                  The rel will be self where the action is retrieval of the same resource.
                enum:
                - delete-checkpoint
            additionalProperties: false
            description: A list of endpoint links that indicate possible actions related
              to the current resource.
      additionalProperties: false
    create_request:
      title: Create a Test Business
      required:
      - typeOfBusiness
      type: object
      properties:
        typeOfBusiness:
          type: string
          description: The type of business income source.
          enum:
          - self-employment
          - uk-property
          - foreign-property
          - property-unspecified
        tradingName:
          type: string
          description: |-
            The trading name of the business.

            Forbidden for property businesses.

            Mandatory for self-employment businesses.
          example: ABC Ltd.
        firstAccountingPeriodStartDate:
          type: string
          description: The first accounting period start date
          format: YYYY-MM-DD
          example: 2019-09-30
        firstAccountingPeriodEndDate:
          type: string
          description: The first accounting period end date
          format: YYYY-MM-DD
          example: 2020-02-29
        latencyDetails:
          required:
          - latencyEndDate
          - latencyIndicator1
          - latencyIndicator2
          - taxYear1
          - taxYear2
          type: object
          properties:
            latencyEndDate:
              type: string
              description: End date of latency period for the income source.
              format: YYYY-MM-DD
              example: 2020-02-27
            taxYear1:
              maximum: 7
              minimum: 7
              type: string
              description: First tax year for the income source.
              format: YYYY-YY
              example: 2018-19
            latencyIndicator1:
              type: string
              description: "Self assessment submission frequency ('A' - Annual, 'Q'\
                \ - Quarterly)."
              example: A
              enum:
              - A
              - Q
            taxYear2:
              maximum: 7
              minimum: 7
              type: string
              description: Second tax year for the income source.
              format: YYYY-YY
              example: 2019-20
            latencyIndicator2:
              type: string
              description: "Self assessment submission frequency ('A' - Annual, 'Q'\
                \ - Quarterly)."
              example: A
              enum:
              - A
              - Q
          description: Income source latency details
        quarterlyTypeChoice:
          type: object
          properties:
            quarterlyPeriodType:
              type: string
              description: The quarterly period type that is being chosen for the
                business ID.
              enum:
              - standard
              - calendar
            taxYearOfChoice:
              type: string
              description: The tax year for which the quarterly period type was chosen.
              format: "^2[0-9]{3}-[0-9]{2}$"
          description: Quarterly reporting period type
        accountingType:
          type: string
          description: "CASH if you used the cash basis, money actually received and\
            \ paid out, to calculate your income and expenses. Otherwise ACCRUALS."
          enum:
          - CASH
          - ACCRUALS
        commencementDate:
          type: string
          description: "Business start date, must be in the past."
          format: YYYY-MM-DD
          example: 2016-09-24
        cessationDate:
          type: string
          description: Business cessation date.
          format: YYYY-MM-DD
          example: 2020-03-24
        businessAddressLineOne:
          maximum: 35
          type: string
          description: |-
            First line of the business address.

            Forbidden for property businesses.

            Mandatory for self-employment businesses.
          example: 1 ABC Rd.
        businessAddressLineTwo:
          maximum: 35
          type: string
          description: |-
            Second line of the business address.

            Forbidden for property businesses.
          example: London
        businessAddressLineThree:
          maximum: 35
          type: string
          description: |-
            Third line of the business address.

            Forbidden for property businesses.
          example: Greater London
        businessAddressLineFour:
          maximum: 35
          type: string
          description: |-
            Fourth line of the business address.

            Forbidden for property businesses.
          example: United Kingdom
        businessAddressPostcode:
          pattern: "^[A-Z]{1,2}[0-9][0-9A-Z]?\\s?[0-9][A-Z]{2}|BFPO\\s?[0-9]{1,10}$"
          type: string
          description: |-
            Business postcode.

            Forbidden for property businesses.

            Mandatory for self-employment businesses if businessAddressCountryCode "GB" is provided.
          example: M1 1AG
        businessAddressCountryCode:
          type: string
          description: |-
            The two letter code for a country must adhere to ISO 3166.

            Forbidden for property businesses.

            Mandatory for self-employment businesses.
          example: GB
      additionalProperties: false
    create_response:
      title: Create a Test Business
      type: object
      properties:
        businessId:
          pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
          type: string
          description: A unique identifier for the business income source.
        links:
          type: array
          items:
            required:
            - href
            - method
            - rel
            type: object
            properties:
              href:
                type: string
                description: The relative url of the endpoint.
                example: /individuals/self-assessment-test-support/business/ET009363D
              method:
                type: string
                description: The HTTP method type for the endpoint.
                enum:
                - GET
                - DELETE
              rel:
                type: string
                description: |-
                  A label for the endpoint, which describes how it is related to the current resource
                  The rel will be self where the action is retrieval of the same resource.
                enum:
                - self
                - delete-business
            additionalProperties: false
            description: A list of endpoint links that indicate possible actions related
              to the current resource.
      additionalProperties: false
    create_amend_request:
      title: Root Schema
      required:
      - itsaStatusDetails
      type: object
      properties:
        itsaStatusDetails:
          type: array
          items:
            required:
            - status
            - statusReason
            - submittedOn
            type: object
            properties:
              submittedOn:
                type: string
                description: "The date the ITSA status was submitted, in the format\
                  \ YYYY-MM-DDThh:mm:ss.SSSZ"
                format: YYYY-MM-DDThh:mm:ss.SSSZ
              status:
                type: string
                description: The ITSA status for the tax year.
                enum:
                - No Status
                - MTD Mandated
                - MTD Voluntary
                - Annual
                - Non Digital
                - Dormant
                - MTD Exempt
              statusReason:
                type: string
                description: The reason for the ITSA status.
                enum:
                - Sign up - return available
                - Sign up - no return available
                - ITSA final declaration
                - ITSA Q4 declaration
                - CESA SA return
                - Complex
                - Ceased income source
                - Reinstated income source
                - Rollover
                - Income Source Latency Changes
                - MTD ITSA Opt-Out
                - MTD ITSA Opt-In
                - Digitally Exempt
              businessIncome2YearsPrior:
                maximum: 99999999999.99
                minimum: 0.0
                type: number
                description: |-
                  The business income for 2 years prior to the specified taxYear.

                  For example, if the tax year requested is 2026-27, then 'businessIncome2YearsPrior' is for the 2024-25 tax year.

                  For Q4 check, the business income 1 year prior will be used.
  parameters:
    ninoDeleteData:
      name: nino
      in: query
      description: "National Insurance number, in the format `AA999999A`. \n\nIf supplied,\
        \ the endpoint deletes only stateful test data stored against the vendor that\
        \ is associated with the specified National Insurance number.\n"
      schema:
        type: string
        example: TC663795B
    acceptHeader:
      name: Accept
      in: header
      description: |
        Specifies the response format and the version of the API to be used.
      required: true
      schema:
        type: string
        enum:
        - application/vnd.hmrc.1.0+json
    authorizationWriteScopeHeader:
      name: Authorization
      in: header
      description: |
        An OAuth 2.0 Bearer Token with the *write:self-assessment* scope.
      required: true
      schema:
        type: string
        example: Bearer bb7fed3fe10dd235a2ccda3d50fb
    checkpointId:
      name: checkpointId
      in: path
      description: |
        The unique identifier of the checkpoint returned by the 'Create a checkpoint' endpoint. Format: ^[A-Za-z0-9\-]{36}$
      required: true
      schema:
        type: string
        example: a1e8057e-fbbc-47a8-a8b4-78d9f015c253
    nino:
      name: nino
      in: path
      description: |
        National Insurance number.
      required: true
      schema:
        pattern: "^((?!(BG|GB|KN|NK|NT|TN|ZZ)|(D|F|I|Q|U|V)[A-Z]|[A-Z](D|F|I|O|Q|U|V))[A-Z]{2})[0-9]{6}[A-D]$"
        type: string
        example: TC663795B
    businessId:
      name: businessId
      in: path
      description: |
        An identifier for the business, unique to the customer.
      required: true
      schema:
        pattern: "^X[A-Z0-9]{1}IS[0-9]{11}$"
        type: string
        example: XAIS12345678910
    taxYear:
      name: taxYear
      in: path
      description: |
        The tax year to submit data for. The start year and end year must not span two tax years. No gaps are allowed - for example, 2023-25 is not valid. There is no minimum tax year.
      required: true
      schema:
        type: string
        format: YYYY-YY
        example: 2023-24
  examples:
    formatCheckpointId:
      description: The format of the supplied Checkpoint ID field is not valid.
      value:
        code: FORMAT_CHECKPOINT_ID
        message: The provided checkpoint ID is invalid
    clientOrAgentNotAuthorised:
      description: "The client and/or agent is not authorised. This is normally because:\
        \ the client is not subscribed to MTD, \nthe agent is not subscribed to Agent\
        \ Services, or the client has not authorised the agent to act on their behalf.\n"
      value:
        code: CLIENT_OR_AGENT_NOT_AUTHORISED
        message: The client and/or agent is not authorised
    notFoundCheckpointId:
      description: No checkpoint found for the passed Checkpoint ID.
      value:
        code: MATCHING_RESOURCE_NOT_FOUND
        message: Matching resource not found
    formatNino:
      description: The format of the supplied NINO is not valid.
      value:
        code: FORMAT_NINO
        message: The provided NINO is invalid
    formatTypeOfBusiness:
      description: |
        The format of the type of business field is not valid.
      value:
        code: FORMAT_TYPE_OF_BUSINESS
        message: The provided typeOfBusiness field is invalid
    formatDate:
      description: |
        The supplied date format is not valid.
      value:
        code: FORMAT_DATE
        message: The supplied date format is not valid
    formatTaxYear:
      description: The format of the supplied taxYear value is not valid.
      value:
        code: FORMAT_TAX_YEAR
        message: The provided tax year is invalid
    formatAccountingType:
      description: |
        The format of the accounting type field is not valid.
      value:
        code: FORMAT_ACCOUNTING_TYPE
        message: The provided accountingType field is invalid
    formatPostcode:
      description: |
        The format of the postcode field is not valid.
      value:
        code: FORMAT_POSTCODE
        message: The provided businessAddressPostcode is invalid
    formatLatencyIndicator:
      description: |
        The format of a latency indicator fields must be "A" or "Q".
      value:
        code: FORMAT_LATENCY_INDICATOR
        message: The format of a latency indicator field is incorrect
    missingPostcode:
      description: |
        The businessAddressPostcode is mandatory when businessAddressCountryCode is "GB".
      value:
        code: MISSING_POSTCODE
        message: Missing postcode
    formatCountryCode:
      description: |
        The businessAddressCountryCode must be an ISO3166 2-letter country code.
      value:
        code: FORMAT_COUNTRY_CODE
        message: The provided country code is invalid
    ruleCommencementDateNotSupported:
      description: |
        The commencement date specified is not in the past.
      value:
        code: RULE_COMMENCEMENT_DATE_NOT_SUPPORTED
        message: The specified commencementDate must be in the past
    rulePropertyBusinessAdded:
      description: |
        A maximum of one property business for each type "uk-property", "foreign-property" and "property-unspecified" is allowed.
      value:
        code: RULE_PROPERTY_BUSINESS_ADDED
        message: The provided property business is already added
    ruleIncorrectOrEmptyBodySubmitted:
      description: |
        An empty or non-matching body was submitted.
      value:
        code: RULE_INCORRECT_OR_EMPTY_BODY_SUBMITTED
        message: An empty or non-matching body was submitted
    ruleTaxYearRangeInvalid:
      description: Tax year range invalid. A tax year range of one year is required.
      value:
        code: RULE_TAX_YEAR_RANGE_INVALID
        message: The tax year range is invalid
    missingFirstAccountingPeriodStartDate:
      description: "When firstAccountingPeriodEndDate is provided, firstAccountingPeriodStartDate\
        \ must also be provided."
      value:
        code: MISSING_FIRST_ACCOUNTING_PERIOD_START_DATE
        message: Missing firstAccountingPeriodStartDate value
    missingFirstAccountingPeriodEndDate:
      description: "When firstAccountingPeriodStartDate is provided,  firstAccountingPeriodEndDate\
        \ must also be provided."
      value:
        code: MISSING_FIRST_ACCOUNTING_PERIOD_END_DATE
        message: Missing firstAccountingPeriodEndDate value
    ruleFirstAccountingDateRangeInvalid:
      description: "The firstAccountingPeriodStartDate and firstAccountingPeriodEndDate\
        \ must align with a single tax year - that is, the start date must be 6th\
        \ April of one year and the end date must be 5th April of the following year."
      value:
        code: RULE_FIRST_ACCOUNTING_DATE_RANGE_INVALID
        message: The first accounting period is not a single complete tax year
    ruleUnexpectedBusinessAddress:
      description: "When creating a property business, you are not allowed to provide\
        \ any businessAddress fields."
      value:
        code: RULE_UNEXPECTED_BUSINESS_ADDRESS
        message: Unexpected businessAddress provided for property business
    ruleMissingBusinessAddress:
      description: "When creating a self-employment business, you need to provide\
        \ values for businessAddressLineOne and businessAddressCountryCode."
      value:
        code: RULE_MISSING_BUSINESS_ADDRESS
        message: businessAddress not provided for the self-employment business
    ruleUnexpectedTradingName:
      description: "When creating a property business, you are not allowed to provide\
        \ tradingName."
      value:
        code: RULE_UNEXPECTED_TRADING_NAME
        message: Unexpected tradingName provided for property business
    ruleMissingTradingName:
      description: "When creating a self-employment business, you need to provide\
        \ a tradingName value."
      value:
        code: RULE_MISSING_TRADING_NAME
        message: tradingName not provided for the self-employment business
    formatBusinessId:
      description: |
        The format of the supplied Business ID field is not valid.
      value:
        code: FORMAT_BUSINESS_ID
        message: The provided Business ID is invalid
    notFound:
      description: The remote endpoint has indicated that no data can be found for
        the given vendor.
      value:
        code: MATCHING_RESOURCE_NOT_FOUND
        message: Matching resource not found
    formatStatus:
      description: The format of the supplied status is not valid.
      value:
        code: FORMAT_STATUS
        message: The provided status is invalid
    formatStatusReason:
      description: The format of the supplied status reason is not valid.
      value:
        code: FORMAT_STATUS_REASON
        message: The provided status reason is invalid
    formatBusinessIncome2YearsPrior:
      description: The format of the supplied businessIncome2YearsPrior is not valid.
      value:
        code: FORMAT_BUSINESS_INCOME_2_YEARS_PRIOR
        message: The provided business Income 2 Years Prior is invalid
    formatSubmittedOn:
      description: The format of the supplied submittedOn date is not valid.
      value:
        code: FORMAT_SUBMITTED_ON
        message: The provided submitted on date is invalid
    duplicateSubmittedOn:
      description: Two or more of the supplied records have the same submittedOn value.
      value:
        code: DUPLICATE_SUBMITTED_ON
        message: The provided submittedOn values are not unique
  headers:
    correlationId:
      description: |
        Unique ID for operation tracking
        String, 36 characters.
      required: true
      schema:
        type: string
        example: c75f40a6-a3df-4429-a697-471eeec46435
  securitySchemes:
    User-Restricted:
      type: oauth2
      description: "HMRC supports OAuth 2.0 for authenticating [User-restricted](https://developer.service.hmrc.gov.uk/api-documentation/docs/authorisation/user-restricted-endpoints)\
        \ API requests"
      flows:
        authorizationCode:
          authorizationUrl: https://api.service.hmrc.gov.uk/oauth/authorize
          tokenUrl: https://api.service.hmrc.gov.uk/oauth/token
          refreshUrl: https://api.service.hmrc.gov.uk/oauth/refresh
          scopes:
            write:self-assessment: Grant write access
            read:self-assessment: Grant read access
